# 建構即時互動數字人聊天室專案任務列表

基於規格書，列出開發任務。任務按階段分組，優先級從高到低。

## 階段 1: 專案初始化與設定
- [x] 初始化專案：手動建立專案資料夾結構，建立 package.json 定義專案設定和依賴（包括 antd, axios, @react-three/fiber, @react-three/drei, @pixiv/three-vrm），然後執行 `npm install` 安裝套件。
- [x] 設定專案結構：建立 components/ 資料夾，準備 ChatRoom.tsx 和 Avatar.tsx。
- [x] 準備 VRM 模型：將 taipu.vrm 檔案移至 public/ 資料夾。

## 階段 2: 建構核心組件
- [ ] 建構 ChatRoom 組件：實現文字輸入框、語音按鈕、訊息列表，使用 Web Speech API 處理語音輸入。
- [ ] 建構 Avatar 組件：載入 VRM 模型，使用 Three.js 渲染，加入嘴巴動畫（blendShape）。
- [ ] 整合組件：修改 App.tsx 組合 ChatRoom 和 Avatar，佈局為左右分欄。
- [ ] 實現 webhook 串接：使用 axios 發送用戶輸入至 n8n，並接收回應。

## 階段 3: 語音與動畫功能
- [ ] 實現語音輸入：整合 Web Speech API，支援中文輸入，轉為文字。
- [ ] 實現語音輸出：整合外部 TTS 服務（如 Azure 或 Google），使用日系女性聲音（16-17歲範圍）。
- [ ] 實現動畫：根據訊息觸發 VRM 模型嘴巴動畫和表情變化。
- [ ] 優化語音處理：加入噪音過濾，提升準確度。

## 階段 4: 測試與優化
- [ ] 撰寫單元測試：使用 Jest 測試組件功能。
- [ ] 進行整合測試：測試 webhook 互動和語音流程。
- [ ] 效能優化：確保 3D 渲染維持 60 FPS，回應延遲 < 500ms。
- [ ] 兼容性測試：測試 Chrome、Firefox 等瀏覽器。

## 階段 5: 部署與維護
- [ ] 部署應用：使用 `npm run build`，部署至 Vercel 或 Netlify。
- [ ] 設定監控：使用瀏覽器開發工具監控效能。
- [ ] 文檔撰寫：提供使用說明和開發者文檔。
- [ ] 最終測試：端到端測試完整用戶流程。

## 備註
- 任務依賴規格書中的功能需求和技術規格。
- 優先處理核心功能（聊天、VRM 渲染），再擴展語音和動畫。
- 若遇到問題，參考規格書的測試計劃和架構。